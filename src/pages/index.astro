---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import NewsCard from '../components/NewsCard.astro';
import { getPath } from '../utils/paths.js';

const newsArticles = [

{
  title: "¬øPor qu√© Bitcoin es la criptomoneda n√∫mero uno del mundo?",
  description: "Conoc√© las razones por las que Bitcoin es la criptomoneda n√∫mero uno: su origen, tecnolog√≠a, adopci√≥n global y el rol que cumple como reserva digital de valor.",
  image: "https://plus.unsplash.com/premium_photo-1663931932716-3086b87f2ed1?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1170",
  link: "/articulos/por-que-bitcoin-es-la-criptomoneda-numero-uno-del-mundo.html",
  category: "Inversiones"
},

{
  title: "¬øQu√© es una criptomoneda y c√≥mo funciona?",
  description: "Descubr√≠ qu√© es una criptomoneda, c√≥mo funciona la tecnolog√≠a blockchain y por qu√© est√° revolucionando el sistema financiero global.",
  image: "https://images.unsplash.com/photo-1621504450181-5d356f61d307?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=687",
  link: "/articulos/que-es-una-criptomoneda-y-como-funciona.html",
  category: "Inversiones"
},

{
  title: "Scalping en trading: la estrategia de las operaciones r√°pidas",
  description: "El scalping es una t√©cnica de trading que busca peque√±as ganancias en operaciones r√°pidas. Descubr√≠ c√≥mo funciona, sus ventajas y qu√© perfil de trader lo usa.",
  image: "https://images.unsplash.com/photo-1620266757065-5814239881fd?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&",
  link: "/articulos/scalping-en-trading-la-estrategia-de-las-operaciones-rapidas.html",
  category: "Trading"
},

{
  title: "¬øQu√© es el trading y c√≥mo empezar paso a paso?",
  description: "¬øQuer√©s aprender qu√© es el trading y c√≥mo empezar a operar en los mercados financieros? Conoc√© los tipos de trading, herramientas y consejos para principiantes.",
  image: "https://images.unsplash.com/photo-1535320903710-d993d3d77d29?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1170",
  link: "/articulos/que-es-el-trading-y-como-empezar-paso-a-paso.html",
  category: "Trading"
},

{
  title: "¬øQu√© es el apalancamiento en trading y c√≥mo funciona?",
  description: "Descubr√≠ qu√© es el apalancamiento en trading, c√≥mo funciona y por qu√© puede multiplicar tanto las ganancias como las p√©rdidas. Aprend√© a usarlo con responsabili",
  image: "https://images.unsplash.com/photo-1563986768711-b3bde3dc821e?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1168",
  link: "/articulos/que-es-el-apalancamiento-en-trading-y-como-funciona.html",
  category: "Trading"
},

  {
    title: "Garry, ¬øfunciona el robot de trading de Inversor Global?",
    description: "An√°lisis esc√©ptico de Garry (robot de trading de Inversor Global): c√≥mo opera, copy trading con Exness, riesgos, resultados, costos y si vale la pena.",
    image: "https://images.unsplash.com/photo-1485827404703-89b55fcc595e?w=800&h=500&fit=crop",
    link: "/articulos/garry-robot-trading.html",
    category: "Trading"
  },
  {
  title: "Qu√© es el slippage: definici√≥n, c√°lculo y c√≥mo reducirlo",
  description: "Descubre qu√© es el slippage, c√≥mo se calcula, por qu√© afecta tu rendimiento real y t√©cnicas para reducirlo (√≥rdenes limit, slicing, horarios, liquidez y latencia).",
  image: "https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=800&h=500&fit=crop",
  link: "/articulos/que-es-slippage-definicion-calculo.html",
  category: "Educaci√≥n"
},
{
  title: "Qu√© es el drawdown: definici√≥n, c√°lculo y por qu√© es clave en trading",
  description: "Aprende qu√© es el drawdown, c√≥mo calcular el m√°ximo drawdown (MDD), por qu√© afecta tu estrategia y c√≥mo reducirlo con gesti√≥n de riesgo y diversificaci√≥n.",
  image: "https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&h=500&fit=crop",
  link: "/articulos/que-es-drawdown-definicion-calculo.html",
  category: "An√°lisis"
},
{
  title: "Gesti√≥n de riesgo 101: Gu√≠a completa de copy trading paso a paso",
  description: "Aprende a invertir con copy trading con una gesti√≥n de riesgo profesional: tama√±os, drawdown, slippage, l√≠mites diarios, due diligence y plan de implementaci√≥n en 4 semanas.",
  image: "https://images.unsplash.com/photo-1579621970563-ebec7560ff3e?w=800&h=500&fit=crop",
  link: "articulos/gestion-riesgo-copy-trading.html",
  category: "Inversiones"
}
];
---

<Layout 
  title="Bajo la Lupa - Blog de Finanzas y Mercado" 
  description="Noticias, an√°lisis y consejos sobre inversiones, mercado financiero, criptomonedas y econom√≠a global."
>
  <Header />
  
  <main class="py-5">
    <!-- Hero Section -->
    <section class="hero-section py-5 mb-5">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-8 mx-auto text-center">
            <h1 class="display-4 fw-bold mb-4 animate-fade-in">
              Noticias Financieras <span class="text-primary">al Descubierto</span>
            </h1>
            <p class="lead mb-4 animate-fade-in" style="animation-delay: 0.2s; color: var(--text-secondary);">
              An√°lisis profundo del mercado, inversiones inteligentes y tendencias econ√≥micas que impactan tu futuro financiero.
            </p>
            <div class="d-flex gap-3 justify-content-center animate-fade-in" style="animation-delay: 0.4s;">
              <a href="#noticias" class="btn btn-primary btn-lg px-4">
                Ver Noticias
              </a>
              <a href="/#contacto" class="btn btn-outline-primary btn-lg px-4">
                Suscribirse
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- News Grid -->
    <section id="noticias" class="py-5">
      <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-5">
          <h2 class="h3 fw-bold mb-0">Art√≠culos Recientes</h2>
          <a href={getPath('todos-los-articulos.html')} class="text-primary fw-semibold text-decoration-none">
            Ver todos ‚Üí
          </a>
        </div>
        
        <div class="row g-4">
          {newsArticles.map((article, index) => (
            <div class="col-12 col-md-6 col-lg-6" style={`animation-delay: ${index * 0.1}s`}>
              <NewsCard {...article} />
            </div>
          ))}
        </div>
      </div>
    </section>

   <!-- Newsletter Section -->
    <section id="contacto" class="newsletter-section py-5 mt-5">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <div class="newsletter-card p-5 rounded-4 text-center">
              <h2 class="h3 fw-bold mb-3">üìß Mantente Informado</h2>
              <p class="mb-4">
                Recibe las √∫ltimas noticias financieras directamente en tu correo. Sin spam, solo contenido de valor.
              </p>
              
              <!-- Formulario -->
              <form id="newsletter-form" class="row g-3 justify-content-center">
                <div class="col-md-7">
                  <input 
                    type="email" 
                    id="email-input"
                    class="form-control form-control-lg" 
                    placeholder="tu@email.com"
                    required
                  />
                </div>
                <div class="col-md-auto">
                  <button type="submit" id="submit-btn" class="btn btn-primary btn-lg w-100">
                    <span id="btn-text">Suscribirse</span>
                    <span id="btn-loading" class="d-none">
                      <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                      Enviando...
                    </span>
                  </button>
                </div>
              </form>

              <!-- Mensajes de respuesta -->
          
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

   <!-- Toast Container -->
  <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 9999;">
    <div id="newsletter-toast" class="toast align-items-center border-0" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body">
          <span id="toast-icon" class="me-2"></span>
          <span id="toast-message"></span>
        </div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer py-5 mt-5">
    <div class="container">
      <div class="row g-4">
        <div class="col-lg-4">
          <div class="d-flex align-items-center gap-3 mb-3">
            <img 
              src="https://cdn2.inversorglobal.com/Cartas-Venta/2025/9.Septiembre/bajo-lupa/logo.png" 
              alt="Bajo la Lupa" 
              width="40"
              height="auto"
            />
            <h3 class="h5 mb-0">Bajo la Lupa</h3>
          </div>
          <p style="color: var(--text-secondary);">
            Tu fuente confiable de noticias y an√°lisis del mercado financiero.
          </p>
        </div>
        
        <div class="col-lg-4">
          <h4 class="h6 fw-bold mb-3">Enlaces R√°pidos</h4>
         <ul class="list-unstyled">
            <li class="mb-2"><a href={getPath('/')} class="text-decoration-none">Inicio</a></li>
            <li class="mb-2"><a href={getPath('#noticias')} class="text-decoration-none">Noticias</a></li>
     
            <li class="mb-2"><a href={getPath('#contacto')} class="text-decoration-none">Contacto</a></li>
          </ul>
        </div>
        
        <div class="col-lg-4">
          <h4 class="h6 fw-bold mb-3">S√≠guenos</h4>
          <div class="d-flex gap-3">
            <a href="#" class="btn btn-outline-secondary rounded-circle p-0 d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; border-color: var(--border-color); color: var(--text-secondary);" aria-label="Twitter">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.6.75Zm-.86 13.028h1.36L4.323 2.145H2.865l8.875 11.633Z"/>
              </svg>
            </a>
            <a href="#" class="btn btn-outline-secondary rounded-circle p-0 d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; border-color: var(--border-color); color: var(--text-secondary);" aria-label="LinkedIn">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/>
              </svg>
            </a>
            <a href="#" class="btn btn-outline-secondary rounded-circle p-0 d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; border-color: var(--border-color); color: var(--text-secondary);" aria-label="YouTube">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                <path d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31.4 31.4 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788 0 0 1 7.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z"/>
              </svg>
            </a>
          </div>
        </div>
      </div>
      
      <hr class="my-4" style="border-color: var(--border-color);" />
      
      <div class="text-center" style="color: var(--text-muted);">
        <p class="mb-0 small">¬© 2025 Bajo la Lupa. Todos los derechos reservados.</p>
      </div>
    </div>
  </footer>

<script is:inline>
  (function() {
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycby_aQcG1H5A4WyOYMqyqzMcvU4RyOXPxcv-5WtU2RuPRRe9IXBWNSe3BWwhmLDKyann7Q/exec';
    
    function iniciarFormulario() {
      const form = document.getElementById('newsletter-form');
      const input = document.getElementById('email-input');
      const btn = document.getElementById('submit-btn');
      const texto = document.getElementById('btn-text');
      const loading = document.getElementById('btn-loading');
      
      if (!form || !input || !btn) return;
      
      form.addEventListener('submit', function(evento) {
        evento.preventDefault();
        
        const correo = input.value.trim();
        
        if (!correo || correo.indexOf('@') === -1) {
          mostrarMensaje('Ingresa un email v√°lido', 'error');
          return;
        }
        
        btn.disabled = true;
        texto.classList.add('d-none');
        loading.classList.remove('d-none');
        
        fetch(SCRIPT_URL, {
          method: 'POST',
          mode: 'no-cors',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            email: correo,
            origen: 'Web - Bajo la Lupa'
          })
        })
        .then(function() {
          mostrarMensaje('¬°Gracias por suscribirte! Revisa tu correo.', 'success');
          input.value = '';
        })
        .catch(function() {
          mostrarMensaje('Hubo un error. Intenta nuevamente.', 'error');
        })
        .finally(function() {
          btn.disabled = false;
          texto.classList.remove('d-none');
          loading.classList.add('d-none');
        });
      });
    }
    
    function mostrarMensaje(texto, tipo) {
      const toast = document.getElementById('newsletter-toast');
      const icono = document.getElementById('toast-icon');
      const mensaje = document.getElementById('toast-message');
      
      if (!toast || !icono || !mensaje) return;
      
      if (tipo === 'success') {
        icono.textContent = '‚úì';
        toast.classList.remove('error');
        toast.classList.add('success');
      } else {
        icono.textContent = '‚úï';
        toast.classList.remove('success');
        toast.classList.add('error');
      }
      
      mensaje.textContent = texto;
      
      const bsToast = new window.bootstrap.Toast(toast, {
        autohide: true,
        delay: 5000
      });
      
      bsToast.show();
    }
    
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', iniciarFormulario);
    } else {
      iniciarFormulario();
    }
  })();
</script>


</Layout>

<style>
  .hero-section {
    background: linear-gradient(135deg, var(--bg-main) 0%, var(--bg-secondary) 100%);
  }

  .btn-outline-primary {
    border-color: var(--primary-color);
    color: var(--primary-color);
  }

  .btn-outline-primary:hover {
    background-color: var(--primary-color);
    color: white;
  }

  .newsletter-card {
    background: linear-gradient(135deg, #1173d4 0%, #0d5ba8 100%);
    color: white;
  }

  .newsletter-card h2,
  .newsletter-card p {
    color: white;
  }

  .newsletter-card .form-control {
    border: 2px solid rgba(255, 255, 255, 0.2);
    background: rgba(255, 255, 255, 0.95);
    color: #333;
  }

  .newsletter-card .form-control:focus {
    border-color: white;
    box-shadow: 0 0 0 0.25rem rgba(255, 255, 255, 0.25);
  }

  .newsletter-card .btn-primary {
    background: white;
    color: var(--primary-color);
    border-color: white;
    font-weight: 600;
  }

  .newsletter-card .btn-primary:hover {
    background: rgba(255, 255, 255, 0.9);
  }

  .footer {
    background-color: var(--bg-secondary) !important;
    border-top: 1px solid var(--border-color);
    color: var(--text-primary);
    transition: background-color 0.3s ease;
  }

  .footer a {
    color: var(--text-secondary);
    transition: color 0.3s ease;
  }

  .footer a:hover {
    color: var(--primary-color) !important;
  }

  .btn-outline-secondary {
    transition: all 0.3s ease;
  }

  .btn-outline-secondary:hover {
    background-color: var(--primary-color) !important;
    border-color: var(--primary-color) !important;
    color: white !important;
  }

  @media (max-width: 768px) {
    .hero-section h1 {
      font-size: 2rem;
    }
    
    .newsletter-card {
      padding: 2rem 1.5rem !important;
    }
  }


/* Estilos para mensajes de respuesta */
 /* Toast personalizado */
  .toast {
    min-width: 350px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    border-radius: 12px;
    font-weight: 500;
  }

  .toast.success {
    background: linear-gradient(135deg, #4CAF50, #45a049);
    color: white;
  }

  .toast.error {
    background: linear-gradient(135deg, #f44336, #d32f2f);
    color: white;
  }

  .toast-body {
    padding: 1rem 0.75rem;
    font-size: 1rem;
    display: flex;
    align-items: center;
  }

  #toast-icon {
    font-size: 1.5rem;
    display: inline-block;
  }

  .btn-close-white {
    filter: brightness(0) invert(1);
  }

  @media (max-width: 576px) {
    .toast {
      min-width: 280px;
    }

    .toast-container {
      padding: 1rem !important;
    }
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .spinner-border-sm {
    width: 1rem;
    height: 1rem;
    border-width: 0.2em;
  }

</style>