---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import NewsCard from '../components/NewsCard.astro';
import { getPath } from '../utils/paths.js';

const allArticles = [

{
  title: "¿Por qué Bitcoin es la criptomoneda número uno del mundo?",
  description: "Conocé las razones por las que Bitcoin es la criptomoneda número uno: su origen, tecnología, adopción global y el rol que cumple como reserva digital de valor.",
  image: "https://plus.unsplash.com/premium_photo-1663931932716-3086b87f2ed1?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1170",
  link: getPath("/articulos/por-que-bitcoin-es-la-criptomoneda-numero-uno-del-mundo.html"),
  category: "Inversiones",
  date: "2025-10-31"
},

{
  title: "¿Qué es una criptomoneda y cómo funciona?",
  description: "Descubrí qué es una criptomoneda, cómo funciona la tecnología blockchain y por qué está revolucionando el sistema financiero global.",
  image: "https://images.unsplash.com/photo-1621504450181-5d356f61d307?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=687",
  link: getPath("/articulos/que-es-una-criptomoneda-y-como-funciona.html"),
  category: "Inversiones",
  date: "2025-10-31"
},

{
  title: "Scalping en trading: la estrategia de las operaciones rápidas",
  description: "El scalping es una técnica de trading que busca pequeñas ganancias en operaciones rápidas. Descubrí cómo funciona, sus ventajas y qué perfil de trader lo usa.",
  image: "https://images.unsplash.com/photo-1620266757065-5814239881fd?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1172",
  link: getPath("/articulos/scalping-en-trading-la-estrategia-de-las-operaciones-rapidas.html"),
  category: "Trading",
  date: "2025-10-31"
},

{
  title: "¿Qué es el trading y cómo empezar paso a paso?",
  description: "¿Querés aprender qué es el trading y cómo empezar a operar en los mercados financieros? Conocé los tipos de trading, herramientas y consejos para principiantes.",
  image: "https://images.unsplash.com/photo-1535320903710-d993d3d77d29?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1170",
  link: getPath("/articulos/que-es-el-trading-y-como-empezar-paso-a-paso.html"),
  category: "Trading",
  date: "2025-10-31"
},

{
  title: "¿Qué es el apalancamiento en trading y cómo funciona?",
  description: "Descubrí qué es el apalancamiento en trading, cómo funciona y por qué puede multiplicar tanto las ganancias como las pérdidas. Aprendé a usarlo con responsabili",
  image: "https://images.unsplash.com/photo-1563986768711-b3bde3dc821e?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1168",
  link: getPath("/articulos/que-es-el-apalancamiento-en-trading-y-como-funciona.html"),
  category: "Trading",
  date: "2025-10-31"
},

  {
    title: "Gestión de riesgo 101: Guía completa de copy trading paso a paso",
    description: "Aprende a invertir con copy trading con una gestión de riesgo profesional: tamaños, drawdown, slippage, límites diarios, due diligence y plan de implementación en 4 semanas.",
    image: "https://images.unsplash.com/photo-1579621970563-ebec7560ff3e?w=800&h=500&fit=crop",
    link: getPath("/articulos/gestion-riesgo-copy-trading.html"),
    category: "Inversiones",
    date: "2025-01-03"
  },
  {
    title: "Qué es el drawdown: definición, cálculo y por qué es clave en trading",
    description: "Aprende qué es el drawdown, cómo calcular el máximo drawdown (MDD), por qué afecta tu estrategia y cómo reducirlo con gestión de riesgo y diversificación.",
    image: "https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&h=500&fit=crop",
    link: getPath("/articulos/que-es-drawdown-definicion-calculo.html"),
    category: "Análisis",
    date: "2025-01-03"
  },
  {
    title: "Qué es el slippage: definición, cálculo y cómo reducirlo",
    description: "Descubre qué es el slippage, cómo se calcula, por qué afecta tu rendimiento real y técnicas para reducirlo (órdenes limit, slicing, horarios, liquidez y latencia).",
    image: "https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=800&h=500&fit=crop",
    link: getPath("/articulos/que-es-slippage-definicion-calculo.html"),
    category: "Educación",
    date: "2025-01-03"
  },
  {
    title: "Garry, ¿funciona el robot de trading de Inversor Global?",
    description: "Análisis escéptico de Garry (robot de trading de Inversor Global): cómo opera, copy trading con Exness, riesgos, resultados, costos y si vale la pena.",
    image: "https://images.unsplash.com/photo-1485827404703-89b55fcc595e?w=800&h=500&fit=crop",
    link: getPath("/articulos/garry-robot-trading.html"),
    category: "Trading",
    date: "2025-01-03"
  }
];

// Ordenar por fecha (más reciente primero)
const sortedArticles = allArticles.sort((a, b) => {
  return new Date(b.date).getTime() - new Date(a.date).getTime();
});

// Obtener categorías únicas
const categories = ['Todos', ...new Set(allArticles.map(article => article.category))];

---

<Layout 
  title="Todos los Artículos | Bajo la Lupa" 
  description="Explora todos nuestros artículos sobre finanzas, inversiones, trading y análisis de mercado."
>
  <Header />
  
  <main class="py-5">
    <!-- Header Section -->
    <section class="articles-header py-5">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto text-center">
            <h1 class="display-5 fw-bold mb-3">Todos los Artículos</h1>
            <p class="lead text-secondary mb-4">
              Explora nuestro contenido completo sobre finanzas, trading e inversiones
            </p>
            
            <!-- Filtros por categoría -->
            <div class="category-filters d-flex flex-wrap justify-content-center gap-2 mb-4">
              {categories.map((category) => (
                <button 
                  class="btn btn-filter" 
                  data-category={category}
                  class:list={[category === 'Todos' ? 'active' : '']}
                >
                  {category}
                </button>
              ))}
            </div>

            <!-- Contador de artículos -->
            <p class="text-muted">
              <span id="articles-count">{allArticles.length}</span> artículos encontrados
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Articles Grid -->
    <section class="articles-grid py-4">
      <div class="container">
        <div class="row g-4" id="articles-container">
          {sortedArticles.map((article, index) => (
            <div 
              class="col-12 col-md-6 col-lg-4 article-item" 
              data-category={article.category}
              style={`animation-delay: ${index * 0.05}s`}
            >
              <NewsCard {...article} />
            </div>
          ))}
        </div>

        <!-- Mensaje cuando no hay resultados -->
        <div id="no-results" class="text-center py-5" style="display: none;">
          <div class="empty-state">
            <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" fill="currentColor" class="text-muted mb-3" viewBox="0 0 16 16">
              <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
              <path d="M4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z"/>
            </svg>
            <h3 class="h4 text-muted mb-2">No hay artículos en esta categoría</h3>
            <p class="text-muted">Intenta con otra categoría</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Back to Home -->
    <section class="py-4">
      <div class="container">
        <div class="text-center">
          <a href={getPath('/')} class="btn btn-outline-primary">
            ← Volver al inicio
          </a>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer py-5 mt-5">
    <div class="container">
      <div class="row g-4">
        <div class="col-lg-4">
          <div class="d-flex align-items-center gap-3 mb-3">
            <img 
              src="https://cdn2.inversorglobal.com/Cartas-Venta/2025/9.Septiembre/bajo-lupa/logo.png" 
              alt="Bajo la Lupa" 
              width="40"
              height="auto"
            />
            <h3 class="h5 mb-0">Bajo la Lupa</h3>
          </div>
          <p style="color: var(--text-secondary);">
            Tu fuente confiable de noticias y análisis del mercado financiero.
          </p>
        </div>
        
        <div class="col-lg-4">
          <h4 class="h6 fw-bold mb-3">Enlaces Rápidos</h4>
          <ul class="list-unstyled">
            <li class="mb-2"><a href={getPath('/')} class="text-decoration-none">Inicio</a></li>
            <li class="mb-2"><a href={getPath('#noticias')} class="text-decoration-none">Noticias</a></li>
            <li class="mb-2"><a href={getPath('#contacto')} class="text-decoration-none">Contacto</a></li>
          </ul>
        </div>
        
        <div class="col-lg-4">
          <h4 class="h6 fw-bold mb-3">Síguenos</h4>
          <div class="d-flex gap-3">
            <a href="#" class="btn btn-outline-secondary rounded-circle p-0 d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; border-color: var(--border-color); color: var(--text-secondary);" aria-label="Twitter">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.6.75Zm-.86 13.028h1.36L4.323 2.145H2.865l8.875 11.633Z"/>
              </svg>
            </a>
            <a href="#" class="btn btn-outline-secondary rounded-circle p-0 d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; border-color: var(--border-color); color: var(--text-secondary);" aria-label="LinkedIn">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/>
              </svg>
            </a>
            <a href="#" class="btn btn-outline-secondary rounded-circle p-0 d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; border-color: var(--border-color); color: var(--text-secondary);" aria-label="YouTube">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
                <path d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31.4 31.4 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788 0 0 1 7.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z"/>
              </svg>
            </a>
          </div>
        </div>
      </div>
      
      <hr class="my-4" style="border-color: var(--border-color);" />
      
      <div class="text-center" style="color: var(--text-muted);">
        <p class="mb-0 small">© 2025 Bajo la Lupa. Todos los derechos reservados.</p>
      </div>
    </div>
  </footer>
</Layout>

<style>
  .articles-header {
    background: linear-gradient(135deg, var(--bg-main) 0%, var(--bg-secondary) 100%);
  }

  .btn-filter {
    padding: 0.5rem 1.25rem;
    border: 2px solid var(--border-color);
    background-color: var(--bg-card);
    color: var(--text-secondary);
    border-radius: 25px;
    font-weight: 500;
    transition: all 0.3s ease;
  }

  .btn-filter:hover {
    border-color: var(--primary-color);
    color: var(--primary-color);
    transform: translateY(-2px);
  }

  .btn-filter.active {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
    color: white;
  }

  .article-item {
    opacity: 0;
    animation: fadeInUp 0.5s ease forwards;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .empty-state {
    padding: 3rem 1rem;
  }

  .footer {
    background-color: var(--bg-secondary) !important;
    border-top: 1px solid var(--border-color);
    color: var(--text-primary);
  }

  .footer a {
    color: var(--text-secondary);
    transition: color 0.3s ease;
  }

  .footer a:hover {
    color: var(--primary-color) !important;
  }

  .btn-outline-secondary {
    transition: all 0.3s ease;
  }

  .btn-outline-secondary:hover {
    background-color: var(--primary-color) !important;
    border-color: var(--primary-color) !important;
    color: white !important;
  }

  @media (max-width: 768px) {
    .category-filters {
      gap: 0.5rem !important;
    }

    .btn-filter {
      font-size: 0.875rem;
      padding: 0.4rem 1rem;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const filterButtons = document.querySelectorAll('.btn-filter');
   const articleItems = document.querySelectorAll<HTMLElement>('.article-item');
    const articlesCount = document.getElementById('articles-count');
    const noResults = document.getElementById('no-results') as HTMLElement | null;

    filterButtons.forEach(button => {
      button.addEventListener('click', () => {
        const category = button.getAttribute('data-category');

        // Actualizar botón activo
        filterButtons.forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');

        // Filtrar artículos
        let visibleCount = 0;

        articleItems.forEach((item, index) => {
          const itemCategory = item.getAttribute('data-category');
          
          if (category === 'Todos' || itemCategory === category) {
            item.style.display = 'block';
            item.style.animationDelay = `${index * 0.05}s`;
            visibleCount++;
          } else {
            item.style.display = 'none';
          }
        });

        // Actualizar contador
        if (articlesCount) {
          articlesCount.textContent = visibleCount.toString();
        }

        // Mostrar/ocultar mensaje de sin resultados
        if (noResults) {
          noResults.style.display = visibleCount === 0 ? 'block' : 'none';
        }
      });
    });
  });
</script>

<style is:global>
  .article-item {
    transition: all 0.3s ease;
  }
</style>